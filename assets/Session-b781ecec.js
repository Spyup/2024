import{o as t,c as n,a as o,d as V,u as j,B as z,C as N,A as m,D as H,_ as O,E as se,x as A,G as te,H as P,J as L,t as p,K as R,b as I,F as f,e as S,L as oe,r as G,s as T,M as U,N as W,O as J,P as ne,v as ae,Q as le,w as Z,R as ie,S as re}from"./app-0b91b4cd.js";import{c as ce}from"./community-24f11c66.js";const ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},de=o("path",{fill:"currentColor",d:"m17 18l-5-2.18L7 18V5h10m0-2H7a2 2 0 0 0-2 2v16l7-3l7 3V5a2 2 0 0 0-2-2Z"},null,-1),me=[de];function _e(e,s){return t(),n("svg",ue,me)}const he={name:"mdi-bookmark-outline",render:_e},pe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ve=o("path",{fill:"currentColor",d:"M17 3H7a2 2 0 0 0-2 2v16l7-3l7 3V5a2 2 0 0 0-2-2Z"},null,-1),$e=[ve];function fe(e,s){return t(),n("svg",pe,$e)}const K={name:"mdi-bookmark",render:fe},ke=V({name:"ScheduleItem",props:{sessionId:{type:String,required:!0}},setup(e){const{t:s,locale:r}=j(),{xsOnly:v}=z(),{isLoaded:_,getSessionById:k,favoriteSessions:i,roomsStatusMap:c}=N(),a=m(()=>k(e.sessionId)),u=m(()=>a.value.tags.find(y=>y.id==="Prime")),d=m(()=>({name:"SessionDetail",params:{sessionId:a.value.id}})),l=m(()=>a.value.type[r.value].name),h=m(()=>`${H(a.value.start,"：")} ~ ${H(a.value.end,"：")}`),g=m(()=>a.value[r.value].title),w=m(()=>a.value.speakers.map(y=>y[r.value].name)),E=m(()=>a.value.tags.map(y=>y[r.value].name)),B=m(()=>a.value.language),D=m(()=>a.value.room[r.value].name.split(" / ")[0]),$=m(()=>{var y,F;return!!((F=(y=c.value)==null?void 0:y[a.value.room.id])!=null&&F.isFull)}),C=m(()=>s(`session['room-status'].${$.value?"full":"vacancy"}`)),b=m(()=>a.value.favorite);return{isLoaded:_,xsOnly:v,location:d,isPrimeSession:u,track:l,period:h,title:g,speakers:w,tags:E,language:B,room:D,isFull:$,statusText:C,favorite:b,handleMarkIconOnClick:()=>{i.value.includes(a.value.id)?i.value=i.value.filter(y=>y!==a.value.id):i.value=[...i.value,a.value.id]}}}}),ye={class:"content-section"},ge={class:"track"},be={class:"status"},Se={class:"name"},we={class:"period"},Te={class:"title"},Ce={class:"speaker-list"},Le=o("span",null,"by",-1),Ie={class:"tag-list"};function Me(e,s,r,v,_,k){const i=K,c=he,a=se("router-link");return e.isLoaded?(t(),A(a,{key:0,class:L(["schedule-item",{prime:e.isPrimeSession}]),to:e.location},{default:te(()=>[o("section",ye,[o("h4",ge,[P(o("div",{class:L(["room",{full:e.isFull}])},[o("span",be,p(e.statusText),1),o("span",Se,p(e.room),1)],2),[[R,e.xsOnly]]),o("span",null,p(e.track),1)]),I("  "),o("h4",we,p(e.period),1),I("  "),o("h2",Te,p(e.title),1),I("  "),o("h3",Ce,[Le,(t(!0),n(f,null,S(e.speakers,(u,d)=>(t(),n("span",{key:`session-${e.sessionId}-speaker-${d}`,class:"speaker"},p(u),1))),128))]),I("  "),o("div",Ie,[(t(!0),n(f,null,S(e.tags,(u,d)=>(t(),n("span",{key:`tag-${e.sessionId}-tag-${d}`,class:"tag"},p(u),1))),128))])]),o("span",{class:"mark-icon",onClick:s[0]||(s[0]=oe((...u)=>e.handleMarkIconOnClick&&e.handleMarkIconOnClick(...u),["prevent"]))},[e.favorite?(t(),A(i,{key:0})):(t(),A(c,{key:1}))])]),_:1},8,["class","to"])):I("v-if",!0)}const q=O(ke,[["render",Me],["__file","/home/runner/work/2024/2024/src/components/Session/ScheduleItem.vue"]]),Fe={},Ve=V({name:"AgendaTableRoomCell",props:{roomId:{type:String,required:!0}},setup(e){const{t:s,locale:r}=j(),{isLoaded:v,getRoomById:_,getRoomStatusById:k}=N(),i=m(()=>_(e.roomId)[r.value].name.split(" / ")[0]),c=m(()=>k(e.roomId)),a=m(()=>c.value.isFull),u=m(()=>s(`session['room-status'].${a.value?"full":"vacancy"}`)),d=m(()=>{const h=Fe[e.roomId];if(h===null)return null;const g=new URL(`https://www.youtube-nocookie.com/embed/${h}`);return g.searchParams.set("autoplay","1"),g.searchParams.set("modestbranding","1"),g.searchParams.set("controls","0"),g.searchParams.set("rel","0"),g.toString()}),l=G(!1);return{isLoaded:v,roomName:i,isFull:a,statusText:u,roomLink:d,iframeLoaded:l}}}),Oe={key:0,class:"schedule-table-room-cell"},Ee={class:"text"},Ae=o("span",null,"Room",-1);function Be(e,s,r,v,_,k){return e.isLoaded?(t(),n("div",Oe,[o("div",Ee,[Ae,o("span",null,p(e.roomName),1)])])):I("v-if",!0)}const Q=O(Ve,[["render",Be],["__file","/home/runner/work/2024/2024/src/components/Session/ScheduleTableRoomCell.vue"]]),De=V({name:"ScheduleTable",components:{ScheduleItem:q,ScheduleTableRoomCell:Q},props:{table:{type:Object,required:!0}}}),Pe={class:"schedule-table"},Ne={class:"room-list"},Re={class:"cell-content"},je=o("div",{style:{height:"0.5rem"}},null,-1),qe={class:"table-body"},He=["rowspan"],Ue={class:"cell-content"};function Ze(e,s,r,v,_,k){const i=Q,c=q;return t(),n("table",Pe,[o("thead",Ne,[o("tr",null,[(t(!0),n(f,null,S(e.table.head,a=>(t(),n("th",{key:`table-room-${a.room}`},[o("div",Re,[T(i,{"room-id":a.room},null,8,["room-id"])])]))),128))])]),je,o("tbody",qe,[(t(!0),n(f,null,S(e.table.body,(a,u)=>(t(),n("tr",{key:`table-row-${u}`},[(t(!0),n(f,null,S(a,(d,l)=>(t(),n("td",{key:`table-row-${u}-cell-${l}`,rowspan:d.rowspan},[o("div",Ue,[d.type==="session"?(t(),A(c,{key:0,"session-id":d.element.session},null,8,["session-id"])):I("v-if",!0)])],8,He))),128))]))),128))])])}const X=O(De,[["render",Ze],["__file","/home/runner/work/2024/2024/src/components/Session/ScheduleTable.vue"]]),ze=V({name:"ScheduleList",components:{ScheduleItem:q},props:{list:{type:Object,required:!0},sessionsMap:{type:Object,rquired:!0}},setup(){return{getTimeText:([s,r])=>`${U(s)}：${U(r)}`}}}),Ge={class:"schedule-list"},We={class:"time"};function Je(e,s,r,v,_,k){const i=q;return t(),n("ul",Ge,[(t(!0),n(f,null,S(e.list.items,(c,a)=>(t(),n("section",{key:`schedule-list-section-${a.toString()}`,class:"section"},[o("li",We,p(e.getTimeText(c.start)),1),(t(!0),n(f,null,S(c.elements,({session:u})=>(t(),n("li",{key:`schedule-list-section-${a.toString()}-session-${u}`,class:"schedule-item-container"},[T(i,{"session-id":u},null,8,["session-id"])]))),128))]))),128))])}const Y=O(ze,[["render",Je],["__file","/home/runner/work/2024/2024/src/components/Session/ScheduleList.vue"]]),Ke={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Qe=o("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"},null,-1),Xe=[Qe];function Ye(e,s){return t(),n("svg",Ke,Xe)}const xe={name:"mdi-close",render:Ye},es={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ss=o("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7c0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3a3 3 0 0 0-3-3a3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66c0 1.61 1.31 2.91 2.92 2.91c1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"},null,-1),ts=[ss];function os(e,s){return t(),n("svg",es,ts)}const ns={name:"mdi-share-variant",render:os},as={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ls=o("path",{fill:"currentColor",d:"M6 13h12v-2H6M3 6v2h18V6M10 18h4v-2h-4v2Z"},null,-1),is=[ls];function rs(e,s){return t(),n("svg",as,is)}const cs={name:"mdi-filter-list",render:rs},us={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ds=o("path",{fill:"currentColor",d:"M21 17V8H7v9h14m0-14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h1V1h2v2h8V1h2v2h1m-3.47 8.06l-4.44 4.44l-2.68-2.68l1.06-1.06l1.62 1.62L16.47 10l1.06 1.06M3 21h14v2H3a2 2 0 0 1-2-2V9h2v12Z"},null,-1),ms=[ds];function _s(e,s){return t(),n("svg",us,ms)}const hs={name:"mdi-calendar-multiple-check",render:_s},ps=V({name:"SessionFilter",setup(){const{filterOptions:e,filterValue:s,favoriteSessions:r,getSessionById:v}=N(),{t:_,locale:k}=j(),i=W(),c=J(),a=G(!1),u=m({get:()=>s.value.room,set:$=>{const C=(()=>(console.log(s.value.room,$),s.value.room.includes("*")?$.filter(b=>b!=="*"):!s.value.room.includes("*")&&$.includes("*")?["*"]:$))();s.value={...s.value,room:C}}}),d=$=>{const{name:C,value:b}=$.target;window.scrollTo(0,0),s.value={...s.value,[C]:b}},l=m(()=>s.value.collection!=="*"),h=()=>{a.value=!1,s.value={search:"",tags:"*",room:["*"],type:"*",filter:["*"],collection:"mark"}},g=()=>{i.back()},w=()=>{const $=r.value.map(b=>{const M=v(b);return{startTime:new Date(M.start),endTime:new Date(M.end)}});(()=>{for(let b=0;b<$.length-1;b++)for(let M=b+1;M<$.length;M++){const y=$[b],F=$[M];if(y.endTime>F.startTime&&y.startTime<F.endTime||F.endTime>y.startTime&&F.startTime<y.endTime)return!0}return!1})()?window.alert(_("session.schedule_conflicts")):window.alert(_("session.schedule_no_conflicts"))},E=async()=>{if(r.value.length===0){window.alert(_("session.share_no_favorites"));return}const $=_("session.share_title",{year:"2024"}),C=`${window.location.origin}${i.resolve({query:{filter:r.value.join("")}}).href}`;try{await window.navigator.share({title:$,url:C})}catch{await window.navigator.clipboard.writeText(`${$}
${C}`),window.alert(_("session.share_copied"))}},B=m(()=>Object.keys(c.query).length>0);return{active:a,roomValue:u,filterOptions:e,filterValue:s,locale:k,changeFilterValue:d,t:_,isFilterCollection:l,showFavorites:h,close:g,share:E,hasFilters:B,clearFilters:()=>{i.push({query:{}})},checkMySchedule:w}}}),vs=["placeholder","value"],$s=["name","size"],fs={value:"*"},ks=["value"],ys=["name","value"],gs={value:"*"},bs=["value"];function Ss(e,s,r,v,_,k){const i=hs,c=K,a=cs,u=ns,d=xe;return t(),n("article",{class:L({["session-filter"]:!0,active:e.active})},[P(o("button",{class:L(["fab CalendarMultipleCheck",{active:e.active}]),onClick:s[0]||(s[0]=(...l)=>e.checkMySchedule&&e.checkMySchedule(...l)),title:"收藏議程時間衝突檢查"},[T(i)],2),[[R,e.isFilterCollection]]),e.isFilterCollection?(t(),n(f,{key:1},[o("button",{class:L({fab:!0,bookmark:!0,active:e.active}),onClick:s[3]||(s[3]=(...l)=>e.share&&e.share(...l))},[T(u)],2),o("button",{class:L({fab:!0,close:!0,active:e.active}),onClick:s[4]||(s[4]=(...l)=>e.close&&e.close(...l))},[T(d)],2)],64)):(t(),n(f,{key:0},[o("button",{class:L({fab:!0,bookmark:!0,active:e.active}),onClick:s[1]||(s[1]=(...l)=>e.showFavorites&&e.showFavorites(...l))},[T(c)],2),o("button",{class:L({fab:!0,switch:!0,active:e.active}),onClick:s[2]||(s[2]=l=>e.active=!e.active)},[T(a)],2)],64)),o("section",null,[o("input",{type:"search",placeholder:e.t("session.filter.search"),name:"search",value:e.filterValue.search,onInput:s[5]||(s[5]=(...l)=>e.changeFilterValue&&e.changeFilterValue(...l))},null,40,vs)]),(t(!0),n(f,null,S(e.filterOptions,l=>(t(),n("section",{key:l.label},[l.label==="room"?(t(),n(f,{key:0},[o("label",null,p(e.t(`session.filter.${l.label}`))+": ",1),P(o("select",{name:l.label,multiple:"",size:l.options.length,"onUpdate:modelValue":s[6]||(s[6]=h=>e.roomValue=h)},[o("option",fs,p(e.t("session.filter.all")),1),(t(!0),n(f,null,S(l.options,h=>(t(),n("option",{key:h.id,value:h.id},p(h.name[e.locale]),9,ks))),128))],8,$s),[[ne,e.roomValue]])],64)):(t(),n(f,{key:1},[o("label",null,p(e.t(`session.filter.${l.label}`))+": ",1),o("select",{name:l.label,value:e.filterValue[l.label],onChange:s[7]||(s[7]=(...h)=>e.changeFilterValue&&e.changeFilterValue(...h))},[o("option",gs,p(e.t("session.filter.all")),1),(t(!0),n(f,null,S(l.options,h=>(t(),n("option",{key:h.id,value:h.id},p(h.name[e.locale]),9,bs))),128))],40,ys)],64))]))),128)),e.hasFilters?(t(),n("button",{key:2,class:"clear",onClick:s[8]||(s[8]=(...l)=>e.clearFilters&&e.clearFilters(...l))},[T(d),ae(" "+p(e.t("session.filter.clear")),1)])):I("v-if",!0)],2)}const x=O(ps,[["render",Ss],["__file","/home/runner/work/2024/2024/src/components/Session/SessionFilter.vue"]]),ws=V({name:"AgendaNavbar",setup(){const{isLoaded:e,currentDayIndex:s,daysSchedule:r}=N(),v=m(()=>r.value.map(i=>i.day)),_=m(()=>v.value[s.value]);return{isLoaded:e,days:v,selectedDay:_,onTabClick:i=>{s.value=i}}}}),Ts={key:0,class:"schedule-navbar"},Cs={class:"tabs"},Ls=["onClick"],Is={class:"day-text"},Ms={class:"date"};function Fs(e,s,r,v,_,k){return e.isLoaded?(t(),n("nav",Ts,[o("div",Cs,[(t(!0),n(f,null,S(e.days,(i,c)=>(t(),n("div",{class:L(["tab",{active:e.selectedDay.join("")===i.join("")}]),key:`day-option-${c}`,onClick:a=>e.onTabClick(c)},[o("span",Is,p(`Day ${c+1}`),1),o("span",Ms,p(i.join(" / ")),1)],10,Ls))),128))])])):I("v-if",!0)}const ee=O(ws,[["render",Fs],["__file","/home/runner/work/2024/2024/src/components/Session/ScheduleNavbar.vue"]]);const Vs=V({name:"Session",components:{ScheduleNavbar:ee,ScheduleTable:X,ScheduleList:Y,SessionFilter:x},setup(){const e=J(),s=W(),{load:r,daysSchedule:v,currentDayIndex:_,getSessionById:k,isLoaded:i}=N(),{openPopUp:c,removeAll:a}=le(),{xsOnly:u}=z(),{locale:d}=j();function l(g){return ce.communities.find(w=>w.track===g.type["zh-TW"].name)}function h(){const[g,w]=[i.value,e.params.sessionId];if(!g)return;if(typeof w!="string"){a(B=>{var D;return!((D=B.popupId)!=null&&D.startsWith("session-"))});return}const E=()=>{window.history.state.back?s.back():s.push("/session")};c(w==="template"?{popupId:"session-template",metaOptions:{title:"@{TEMPLATE_META_TITLE}",description:"@{TEMPLATE_META_DESCRIPTION}",ogUrl:"@{TEMPLATE_META_OG_URL}",ogImage:"@{TEMPLATE_META_OG_IMAGE}"},containerData:{type:"default"},contentData:{type:"html",html:"@{TEMPLATE_CONTENT_HTML}"},onClose:E}:{...re(k(w),l(k(w)),d.value),onClose:E})}return h(),Z(()=>[e.params.sessionId,i.value],()=>{h()}),ie&&Z(_,async()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}),{xsOnly:u,currentDayIndex:_,daysSchedule:v,load:r,tryToOpenSessionPopUp:h,route:e}},async serverPrefetch(){await this.load(),this.route.params.sessionId&&this.tryToOpenSessionPopUp()}}),Os={id:"session",class:"page-container"};function Es(e,s,r,v,_,k){const i=ee,c=x,a=Y,u=X;return t(),n("main",Os,[T(i),T(c),(t(!0),n(f,null,S(e.daysSchedule,(d,l)=>(t(),n(f,null,[e.xsOnly?P((t(),A(a,{key:`list-${d.day.join("")}`,list:d.list},null,8,["list"])),[[R,e.currentDayIndex===l]]):P((t(),A(u,{key:`table-${d.day.join("")}`,table:d.table},null,8,["table"])),[[R,e.currentDayIndex===l]])],64))),256))])}const Ds=O(Vs,[["render",Es],["__file","/home/runner/work/2024/2024/src/pages/Session.vue"]]);export{Ds as default};
